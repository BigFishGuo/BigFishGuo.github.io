<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>1</title>
    <script src="../../js/vue.js"></script>
    <script src="../../js/vuex.js"></script>
</head>
<body>
  <div id="app"></div>

  <script>
    var store = new Vuex.Store({
      state: {
        count: 0,
        list: [
          {
            text: 'a',
            done: false
          },
          {
            'text': 'b',
            done: true
          },
          {
            'text': 'c',
            done: true
          }
        ]
      },
      getters: {
        list (state, getters) {
          return state.list.filter(value => value.done)
        }
      },
      mutations: {
        muIncrement (state) {
          state.count++
        },
        pushList (state, payload) {
          state.list.push(payload)
        }
      },
      actions: {
        acIncrement (context) {
          context.commit("muIncrement")
        }
      }
    })

    var Counter = {
      template: `<div>
        <h1>{{hehe}}</h1>
        <h2 v-for="item in list">{{item.text}}</h2>
      </div>`,
      computed: {
        hehe () {
          return this.$store.state.count
        },
        list () {
          return this.$store.getters.list
        }
      }
    }

    var App = new Vue({
      el: "#app",
      store: store,
      data: {
        num: store.state.count
      },
      computed: {
        count () {
          return store.state.count
        }
      },
      components: {
        Counter
      },
      template: `<div>
        <p>{{num}}</p><p>{{count}}</p>
        <Counter></Counter>
      </div>`
    })
  </script>
</body>
</html>